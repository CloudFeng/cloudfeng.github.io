<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="测试驱动开发小思考"/>




  <meta name="keywords" content="TDD, share, cloudfeng" />










  <link rel="alternate" href="/atom.xml" title="cloudfeng">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.2" />



<link rel="canonical" href="https://cloudfeng.github.io/2018/06/29/arts/share/S-TDD-is-perfect/"/>



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css" />



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.2" />



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> 测试驱动开发小思考 - cloudfeng </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">cloudfeng</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">cloudfeng</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          测试驱动开发小思考
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-06-29
        </span>
        
          <span class="post-category">
            
              <a href="/categories/ARTS/">ARTS</a>
            
          </span>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-text">TDD疑问</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-text">一些观点</span></a></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <h2><span id="tdd疑问">TDD疑问</span></h2>
<p>最近学习TDD开发，用在平时开发的时候，就会发现TDD并不完美，特别是测试先行和各种需要覆盖<br>
的测试。存在疑问如下：</p>
<ul>
<li>是否真的需要一开始就写测试，然后一步一步驱动去开发呢；</li>
<li>后续测试用例的维护，特别与关联其他部门的接口，各种mock和stub；</li>
<li>耗费的时候比先写好代码再测试更大；</li>
</ul>
<a id="more"></a>
<h2><span id="一些观点">一些观点</span></h2>
<p>对TDD有一些不成熟的想法，不一定非等需要严格按照TDD开发流程进行项目开发，找到适合自己的就行。TDD<br>
对我来说很难掌握，但可以从TDD中学习和借鉴的是：</p>
<ul>
<li>开发自己列好测试清单，以便我们单元测试做得足够；</li>
<li>重构自己写的代码；</li>
</ul>
<p>后面在StackoverFlow上看到一个帖子<a href="https://stackoverflow.com/questions/153234/how-deep-are-your-unit-tests/#" target="_blank" rel="external">How deep are your unit tests?</a>，附上问题和比较喜欢的答案：</p>
<ol>
<li>问题</li>
</ol>
<blockquote>
<p>The thing I’ve found about TDD is that its takes time to get your tests set up and being naturally lazy I always want to write as little code as possible. The first thing I seem do is test my constructor has set all the properties but is this overkill?</p>
</blockquote>
<blockquote>
<p>My question is to what level of granularity do you write you unit tests at?<br>
…and is there a case of testing too much?</p>
</blockquote>
<p>比较喜欢的两个回答：</p>
<ol>
<li>TDD创始人Kent Beck回答：</li>
</ol>
<blockquote>
<p>I get paid for code that works, not for tests, so my philosophy is <strong>to test as little as possible to reach a given level of confidence</strong> (I suspect this level of confidence is high compared to industry standards, but that could just be hubris). If I don’t typically make a kind of mistake (like setting the wrong variables in a constructor), I don’t test for it. <strong>I do tend to make sense of test errors, so I’m extra careful when I have logic with complicated conditionals</strong>. When coding on a team, I modify my strategy to carefully test code that we, collectively, tend to get wrong.</p>
</blockquote>
<blockquote>
<p>Different people will have different testing strategies based on this philosophy, but that seems reasonable to me given the immature state of understanding of how tests can best fit into the inner loop of coding. Ten or twenty years from now we’ll likely have a more universal theory of which tests to write, which tests not to write, and how to tell the difference. In the meantime, experimentation seems in order.</p>
</blockquote>
<p>kitofr的回答</p>
<blockquote>
<p>Everything should be made as simple as possible, but not simpler. - A. Einstein<br>
One of the most misunderstood things about TDD is the first word in it. Test. That’s why BDD came along. Because people didn’t really understand that the first D was the important one, namely Driven. We all tend to think a little bit to much about the Testing, and a little bit to little about the driving of design. And I guess that this is a vague answer to your question, <strong>but you should probably consider how to drive your code, instead of what you actually are testing; that is something a Coverage-tool can help you with. Design is a quite bigger and more problematic issue</strong>.</p>
</blockquote>
<p>后来看到耗子叔写了一篇<a href="https://coolshell.cn/articles/3649.html?spm=a2c4e.11153940.blogcont381465.6.135360acpMQfws" target="_blank" rel="external">TDD并不是看上去的那么美</a>,比我写的好，思考的深。<img class="github-emoji" title="blush" alt="blush" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60a.png?v8" height="20" width="20"><br>
另外关于<a href="https://softwareengineering.stackexchange.com/questions/59928/difference-between-unit-testing-and-test-driven-development" target="_blank" rel="external">Unit test VS TDD</a>讨论也是十分精彩的，推荐阅读。</p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="https://cloudfeng.github.io">cloudfeng</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="https://cloudfeng.github.io/2018/06/29/arts/share/S-TDD-is-perfect/">https://cloudfeng.github.io/2018/06/29/arts/share/S-TDD-is-perfect/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden />
    <label class="reward-button" for="reward">Reward</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/img/wechat-withdraw.jpeg" title="wechat">
        </label>
      
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/TDD/">TDD</a>
            
              <a href="/tags/share/">share</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/07/07/arts/tip/T-slf4jandlog4j/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">SLF4J 和 LOG4J</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2018/06/29/arts/review/R-learn-by-hard-way/">
        <span class="next-text nav-default">脚踏实地学习</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div>
        <%- partial('post/gitment', {
            key: post.slug,
            title: post.title,
            url: config.url+url_for(post.path)
          }) %>
      </div>
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:zsm0107@126.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
        
          <a href="https://github.com/CloudFeng" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="https://weibo.com/1812591120/profile?topnav=1&wvr=6" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
        
          <a href="https://www.douban.com/people/July__/" class="iconfont icon-douban" title="douban"></a>
        
      
    

    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2018 - 
    
    2019

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">cloudfeng</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  
  <div id="gitment-comments"></div>  
<link rel="stylesheet" href="//imsun.github.io/gitment/style/default.css">
<script src="//imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
  const gitment = new Gitment({
    id: '<%= url %>'.replace(/[^\w\s]/gi, '').substring(0,48),
    owner: 'CloudFeng',
    repo: 'cloudfeng.github.io',
    oauth: {
      client_id: '<%= theme.gitment.client_id %>',
      client_secret: '<%= theme.gitment.client_secret %>'
    }
  });
  gitment.render(document.getElementById('gitment-comments'));
</script>




    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.2"></script>

  </body>
</html>
